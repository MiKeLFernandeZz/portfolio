---
import AstroIcon from "../icons/AstroIcon.astro";
import GitHub from "../icons/GitHub.astro";
import JS from "../icons/JS.astro";
import NextJS from "../icons/NextJS.astro";
import ReactIcon from "../icons/ReactIcon.astro";
import Supabase from "../icons/Supabase.astro";
import Tailwind from "../icons/Tailwind.astro";
import Tecnology from "../icons/Technology.astro";
import TecnologyCard from "./TecnologyCard.astro";
import UnderlineText from "./UnderlineText.astro";
const tecnologias = [
  {
    img: AstroIcon,
  },
  {
    img: ReactIcon,
  },
  {
    img: NextJS,
  },
  {
    img: Tailwind,
  }, 
  {
    img: Supabase,
  }, 
  {
    img: JS,
  }
];
---

<section
  class="lg:max-w-4xl md:max-w-2xl mx-6 md:mx-auto py-16 flex flex-col gap-8"
>
  <div class="flex gap-3 items-center">
    <UnderlineText class="text-3xl text-white font-semibold font-onest"
      ><Tecnology class="inline" /> Tecnologias</UnderlineText
    >
  </div>
  <div class="logo-slider">
    <div class="logos-slide">
      {
        tecnologias.map((tecnologia) => (
          //<tecnologia.img class="size-8 inline-block mx-4" />
          <div class="card inline-block mx-3">
            <div class="inner">
              <tecnologia.img class="size-8" />
            </div>
            <div class="blob" />
            <div class="fakeblob" />
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>

  .logo-slider{
    overflow: hidden;
    padding: 30px 0 0 0;
    white-space: nowrap;
    position: relative;
  }

  .logo-slider:hover .logos-slide{
    animation-play-state: paused;
  } 

  .logos-slide {
    display: inline-block;
    animation: 45s slide infinite linear;
  }

  .logos-slide img{
    width: 183px;
    height: 83px;
    max-width: 0 40px;
  }

  @keyframes slide {
    from {
        transform: translateX(0);
    }

    to {
        transform: translateX(-100%);
    }
  }

  /* .slide {
    width: 100%;
    margin: 0;
    color: white;
    display: inline-flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    align-content: center;
    gap: 20px;
    flex-wrap: wrap;
  } */

.blob {
    filter: blur(40px);
    position: absolute;
    z-index: -1;
    top: 0;
    opacity: 0;
    left: 0;
    width: 250px;
    height: 250px;
    border-radius: 50%;
    background: #5bc0be;
    transition: all 300ms ease-in-out;
  }

  .fakeblob {
    display: hidden;
    position: absolute;
    z-index: -1;
    top: 0;
    left: 0;
    width: 200px;
    height: 200px;
    border-radius: 50%;
  }

  .card {
    overflow: hidden;
    padding: 2px;
    /* margin: 0; */
    background: rgb(128 128 128 / 0.2);
    border-radius: 10px;
    position: relative;
    transition: all 300ms ease-in-out;
  }

  .inner {
    border-radius: 7px;
    padding: 10px;
    width: 80px;
    height: 80px;
    background: rgb(26, 26, 26);
    backdrop-filter: blur(80px);
    transition: all 300ms ease-in-out;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .card:hover > .inner {
    background: rgb(26, 26, 26, 0.6);
    backdrop-filter: blur(80px);
  }
</style>

<script is:inline>

var copy = document.querySelector(".logos-slide").cloneNode(true);
document.querySelector(".logo-slider").appendChild(copy);
  const all = document.querySelectorAll(".card");

  window.addEventListener("mousemove", (ev) => {
    all.forEach((e) => {
      const blob = e.querySelector(".blob");
      const fblob = e.querySelector(".fakeblob");
      const rec = fblob.getBoundingClientRect();
      blob.style.opacity = "1";

      blob.animate(
        [
          {
            transform: `translate(${
              ev.clientX - rec.left - rec.width / 2
            }px,${ev.clientY - rec.top - rec.height / 2}px)`,
          },
        ],
        {
          duration: 300,
          fill: "forwards",
        }
      );
    });
  });
</script>
